<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    
    <!-- SEO & Open Graph -->
    <title>Teras Masjid Para Duda #2 - El-Ibtida Reader</title>
    <meta name="description" content="COMING SOON ðŸ˜Š...">
    <meta property="og:title" content="Teras Masjid Para Duda #2 Pak Yos dan Cinta Di Balik Stir">
    <meta property="og:description" content="COMING SOON ðŸ˜Š...">
    <meta property="og:image" content="https://i.ibb.co.com/sJb3kQTj/8-20250430-202047-0001.png">
    <meta name="theme-color" content="#5b6e7b">
    
    <!-- PWA & Icons -->
    <link rel="manifest" href="./manifest.json">
    <link rel="apple-touch-icon" href="https://i.ibb.co.com/sJb3kQTj/8-20250430-202047-0001.png">
    
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Merriweather:ital,wght@0,300;0,400;0,700;1,300&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        brand: { slate: '#5b6e7b', slateLight: '#8daabf', bg: '#f6f7f8', bgDark: '#1c1c1e', text: '#1C1C1E', textDark: '#F2F2F7', sub: '#8E8E93', paper: '#ffffff', paperDark: '#2c2c2e' }
                    },
                    fontFamily: { sans: ['Inter', 'sans-serif'], serif: ['Playfair Display', 'serif'], book: ['Merriweather', 'serif'] },
                    boxShadow: { 'soft': '0 4px 20px rgba(0, 0, 0, 0.05)', 'floating': '0 10px 40px -10px rgba(0, 0, 0, 0.15)', 'glow': '0 0 15px rgba(91, 110, 123, 0.3)' },
                    animation: { 'slide-up': 'slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1)', 'fade-in': 'fadeIn 0.3s ease-out', 'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite' },
                    keyframes: { slideUp: { '0%': { transform: 'translateY(100%)' }, '100%': { transform: 'translateY(0)' } }, fadeIn: { '0%': { opacity: '0' }, '100%': { opacity: '1' } } }
                }
            }
        }
    </script>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="./style.css">
</head>
<body class="antialiased">
    <!-- Scroll Progress Bar -->
    <div id="scroll-progress"></div>
    <!-- Toast Container -->
    <div id="toast-container"></div>
    
    <!-- App Container -->
    <div id="app" class="body h-screen w-screen overflow-hidden flex flex-col bg-brand-bg dark:bg-brand-bgDark transition-colors duration-300">
        
        <!-- HEADER (Sticky) -->
        <header class="sticky top-0 z-40 glass px-5 py-4 flex justify-between items-center transition-all duration-300">
            <a href="../" class="flex items-center gap-3 group active:scale-95 transition-transform">
                <div class="w-9 h-9 rounded-xl bg-brand-slate text-white flex items-center justify-center shadow-lg shadow-brand-slate/30">
                    <i class="ph-bold ph-books text-lg"></i>
                </div>
                <div class="flex flex-col">
                    <span class="text-sm font-bold text-brand-slate dark:text-brand-slateLight leading-none tracking-tight">El-Ibtida</span>
                    <span class="text-[9px] text-brand-sub dark:text-gray-500 font-medium uppercase tracking-wider mt-1">Digital Reader</span>
                </div>
            </a>
            <div class="flex items-center gap-3">
                <button id="search-toggle" class="w-9 h-9 rounded-full bg-gray-100 dark:bg-white/10 dark:text-white text-gray-600 flex items-center justify-center transition active:scale-90">
                    <i class="ph ph-magnifying-glass text-lg"></i>
                </button>
                <button id="theme-toggle-btn" class="w-9 h-9 rounded-full bg-gray-100 dark:bg-white/10 dark:text-white text-gray-600 flex items-center justify-center transition active:scale-90">
                    <i id="theme-icon" class="ph ph-moon text-lg"></i>
                </button>
                <button id="nav-toggle-btn" class="w-9 h-9 rounded-full bg-gray-100 dark:bg-white/10 dark:text-white text-gray-600 flex items-center justify-center transition active:scale-90 relative">
                    <div class="flex flex-col gap-1.5">
                        <span class="w-4 h-0.5 bg-current rounded-full"></span>
                        <span class="w-4 h-0.5 bg-current rounded-full"></span>
                    </div>
                </button>
            </div>
        </header>
        
        <!-- FLOATING NAV MENU -->
        <nav id="floating-nav" class="fixed top-[72px] right-4 z-50 w-48 glass-card popover-menu hidden-popover overflow-hidden rounded-2xl shadow-floating">
            <div class="py-2">
                <a href="../" class="flex items-center gap-3 px-4 py-3 text-sm font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/5 hover:text-brand-slate dark:hover:text-white transition-colors">
                    <i class="ph ph-house text-lg"></i> Beranda
                </a>
                <div class="h-px bg-gray-100 dark:bg-white/10 my-1"></div>
                <button id="nav-theme-btn" class="w-full flex items-center gap-3 px-4 py-3 text-sm font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/5 transition-colors">
                    <i id="nav-theme-icon" class="ph ph-moon text-lg"></i> Mode Gelap
                </button>
            </div>
        </nav>
        
        <!-- SEARCH MODAL -->
        <div id="search-modal" class="fixed inset-0 z-[100] hidden opacity-0 transition-opacity duration-300">
            <div class="absolute inset-0 bg-black/50 backdrop-blur-sm" id="search-backdrop"></div>
            <div class="absolute top-0 left-0 right-0 bg-white dark:bg-brand-paperDark rounded-b-[32px] p-6 shadow-2xl transform -translate-y-full transition-transform duration-300 ease-[cubic-bezier(0.16,1,0.3,1)]" id="search-modal-content">
                <div class="flex gap-3 mb-6">
                    <div class="flex-1 relative">
                        <i class="ph ph-magnifying-glass absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                        <input type="text" id="search-input" placeholder="Cari di dalam novel..." class="w-full bg-gray-100 dark:bg-black/20 border-none rounded-xl pl-12 pr-4 py-4 text-sm focus:ring-2 focus:ring-brand-slate/20 outline-none transition font-medium text-brand-text dark:text-white placeholder:text-gray-400">
                    </div>
                    <button id="search-close-btn" class="px-4 py-2 text-sm font-bold text-brand-text dark:text-white bg-gray-100 dark:bg-black/20 rounded-xl">Batal</button>
                </div>
                <div class="space-y-2 max-h-96 overflow-y-auto" id="search-results"></div>
                <div class="mt-4 pt-4 border-t border-gray-100 dark:border-white/10">
                    <div class="flex items-center justify-between text-xs text-gray-500 dark:text-gray-400">
                        <span>Tekan <kbd class="px-2 py-1 bg-gray-100 dark:bg-white/10 rounded">Enter</kbd> untuk fokus hasil pertama</span>
                        <span id="search-count">0 hasil ditemukan</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- MAIN SCROLLABLE AREA -->
        <main class="flex-1 relative overflow-y-auto no-scrollbar scroll-smooth" id="main-scroll">
            <!-- DETAIL VIEW -->
            <section id="view-detail" class="px-6 py-6 animate-fade-in min-h-full pb-40">
                <!-- Top Navigation Actions -->
                <div class="flex justify-between items-center mb-8 sticky top-0 bg-brand-bg/95 dark:bg-brand-bgDark/95 backdrop-blur-sm z-30 py-2 -mx-6 px-6">
                    <button onclick="router.backToHome()" class="w-10 h-10 rounded-full border border-gray-200 dark:border-white/10 bg-white dark:bg-white/5 flex items-center justify-center text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-white/10 active:scale-90 transition shadow-sm">
                        <i class="ph ph-caret-left text-xl"></i>
                    </button>
                    <span class="text-[10px] font-bold tracking-[0.2em] text-brand-sub dark:text-gray-500 uppercase">Novel Series</span>
                    <button id="share-btn" class="w-10 h-10 rounded-full border border-gray-200 dark:border-white/10 bg-white dark:bg-white/5 flex items-center justify-center text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-white/10 active:scale-90 transition shadow-sm">
                        <i class="ph ph-share-network text-lg"></i>
                    </button>
                </div>
                
                <!-- Book Hero -->
                <div class="flex flex-col items-center mb-10 animate-slide-up">
                    <div class="book-container w-40 aspect-[2/3] mb-8 group cursor-pointer shadow-floating relative overflow-hidden rounded-r-md rounded-l-sm" id="start-reading-btn">
                        <img id="book-cover-img" src="https://i.ibb.co.com/sJb3kQTj/8-20250430-202047-0001.png" alt="Cover" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent"></div>
                        <div class="absolute inset-0 p-4 flex flex-col justify-between items-center text-center z-10">
                            <span class="text-white/80 text-[8px] uppercase tracking-widest font-bold border border-white/30 px-2 py-0.5 rounded-full backdrop-blur-sm">Edisi Digital</span>
                            <div class="text-white drop-shadow-lg">
                                <h1 class="font-serif font-bold text-lg leading-tight mb-1" id="cover-title">Teras Masjid Para Duda #2</h1>
                                <span class="text-white/90 text-[10px] font-medium tracking-wide" id="cover-author">RaaRion.</span>
                            </div>
                        </div>
                    </div>
                    <div class="text-center space-y-3 w-full">
                        <h2 class="font-serif text-2xl font-bold text-brand-text dark:text-white leading-tight px-2" id="detail-title">Loading...</h2>
                        <p class="text-brand-slate dark:text-brand-slateLight font-sans text-sm font-medium" id="detail-author">Loading...</p>
                        <div class="flex flex-wrap justify-center gap-2 mt-4">
                            <span class="inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 text-[10px] font-bold uppercase tracking-wide">
                                <span class="w-1.5 h-1.5 rounded-full bg-green-500"></span> On Going
                            </span>
                            <span class="inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-gray-100 dark:bg-white/10 text-gray-500 dark:text-gray-400 text-[10px] font-bold uppercase tracking-wide">
                                <i class="ph-fill ph-users"></i> 0 Pembaca
                            </span>
                            <span class="inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-amber-50 dark:bg-amber-900/20 text-amber-600 dark:text-amber-400 text-[10px] font-bold uppercase tracking-wide">
                                <i class="ph-fill ph-star text-amber-500"></i> <span id="avg-rating">5.0</span>
                            </span>
                        </div>
                    </div>
                </div>
                
                <!-- Synopsis (Expandable) -->
                <div class="mb-8 animate-slide-up" style="animation-delay: 0.1s">
                    <h3 class="font-sans font-bold text-xs text-brand-sub/80 dark:text-gray-500 mb-3 uppercase tracking-[0.2em]">Sinopsis</h3>
                    <div class="bg-white dark:bg-brand-paperDark rounded-2xl p-5 shadow-sm border border-gray-100 dark:border-white/5 transition-colors">
                        <p id="detail-desc" class="font-book text-brand-text/80 dark:text-gray-300 text-sm leading-relaxed text-justify line-clamp-3 transition-all duration-300">Loading description...</p>
                        <button id="btn-synopsis" class="mt-3 text-xs font-bold text-brand-slate dark:text-brand-slateLight hover:underline flex items-center gap-1">
                            Baca Selengkapnya <i class="ph-bold ph-caret-down"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Chapter List -->
                <div class="mb-8 animate-slide-up" style="animation-delay: 0.2s">
                    <div class="flex justify-between items-end mb-4">
                        <h3 class="font-sans font-bold text-xs text-brand-sub/80 dark:text-gray-500 uppercase tracking-[0.2em]">Daftar Bab</h3>
                        <span class="text-[10px] font-medium text-brand-slate dark:text-brand-slateLight bg-brand-slate/10 dark:bg-white/10 px-2 py-0.5 rounded-md" id="chapter-count">0 Chapters</span>
                    </div>
                    <div id="chapter-list" class="flex flex-col gap-3"></div>
                </div>
                
                <!-- Reviews -->
                <div class="mb-32 animate-slide-up" style="animation-delay: 0.3s">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="font-sans font-bold text-xs text-brand-sub/80 dark:text-gray-500 uppercase tracking-[0.2em]">Ulasan Pembaca</h3>
                        <button id="open-review-btn" class="text-xs font-bold text-brand-slate dark:text-brand-slateLight bg-white dark:bg-white/5 border border-gray-200 dark:border-white/10 px-3 py-1.5 rounded-full shadow-sm active:scale-95 transition flex items-center gap-1 hover:bg-gray-50 dark:hover:bg-white/10">
                            <i class="ph-bold ph-pencil-simple"></i> Tulis
                        </button>
                    </div>
                    <div id="reviews-container" class="space-y-3"></div>
                </div>
            </section>
        </main>
        
        <!-- FLOATING ACTION BUTTON -->
        <div class="absolute bottom-6 left-0 right-0 flex justify-center z-30 px-6 pointer-events-none">
            <div class="bg-brand-slate text-white rounded-2xl shadow-floating shadow-brand-slate/40 p-2 flex items-center gap-2 pointer-events-auto max-w-[400px] w-full transition-transform duration-300 hover:scale-[1.02]" id="fab-container">
                <button id="btn-bookmark" class="w-12 h-12 flex items-center justify-center rounded-xl bg-white/10 hover:bg-white/20 active:scale-90 transition text-white backdrop-blur-sm">
                    <i class="ph ph-bookmark-simple text-xl transition-colors" id="icon-bookmark"></i>
                </button>
                <button id="start-fab-btn" class="flex-1 h-12 bg-white text-brand-slate rounded-xl font-bold shadow-sm flex items-center justify-center gap-2 active:scale-95 transition px-4">
                    <span>Mulai Membaca</span>
                    <i class="ph-bold ph-book-open-text"></i>
                </button>
            </div>
        </div>
        
        <!-- REVIEW MODAL -->
        <div id="modal-review" class="fixed inset-0 z-[100] hidden opacity-0 transition-opacity duration-300">
            <div class="absolute inset-0 bg-brand-text/20 backdrop-blur-sm" id="review-backdrop"></div>
            <div class="absolute bottom-0 left-0 right-0 bg-white dark:bg-brand-paperDark rounded-t-[32px] p-6 shadow-2xl transform translate-y-full transition-transform duration-300 ease-[cubic-bezier(0.16,1,0.3,1)]" id="modal-content">
                <div class="w-12 h-1.5 bg-gray-200 dark:bg-white/20 rounded-full mx-auto mb-6"></div>
                <h4 class="font-serif text-xl font-bold text-center text-brand-text dark:text-white mb-1">Bagaimana ceritanya?</h4>
                <p class="text-xs text-center text-brand-sub mb-6">Berikan rating dan ulasan Anda</p>
                <div class="flex justify-center gap-2 mb-6">
                    <div class="flex gap-1" id="star-input"></div>
                </div>
                <div class="space-y-3 mb-6">
                    <input type="text" id="input-name" placeholder="Nama Anda" class="w-full bg-gray-50 dark:bg-black/20 border-none rounded-xl p-4 text-sm focus:ring-2 focus:ring-brand-slate/20 outline-none transition font-medium text-brand-text dark:text-white placeholder:text-gray-400" />
                    <textarea id="input-comment" placeholder="Tulis pendapatmu di sini..." class="w-full h-28 bg-gray-50 dark:bg-black/20 border-none rounded-xl p-4 text-sm focus:ring-2 focus:ring-brand-slate/20 outline-none transition resize-none font-book text-brand-text dark:text-white placeholder:text-gray-400"></textarea>
                </div>
                <div class="flex gap-3">
                    <button id="close-review-btn" class="flex-1 py-3.5 text-sm font-bold text-brand-text dark:text-white bg-gray-100 dark:bg-white/10 rounded-xl active:scale-95 transition">Batal</button>
                    <button id="submit-review-btn" class="flex-1 py-3.5 text-sm font-bold text-white bg-brand-slate rounded-xl shadow-lg shadow-brand-slate/20 active:scale-95 transition">Kirim Ulasan</button>
                </div>
            </div>
        </div>
        
        <!-- READER VIEW (Full Screen) -->
        <section id="view-reader" class="fixed inset-0 z-[200] bg-[#fdfdfd] dark:bg-[#000000] hidden flex flex-col h-full transition-transform duration-300 translate-y-full">
            <!-- Reader Top Bar -->
            <div id="reader-top" class="reader-ui absolute top-0 left-0 right-0 p-4 flex justify-between items-center bg-white/80 dark:bg-black/80 backdrop-blur-md border-b border-gray-100 dark:border-white/10 z-10 transition-transform duration-300">
                <button id="reader-back-btn" class="w-10 h-10 flex items-center justify-center rounded-full text-brand-text dark:text-white hover:bg-gray-100 dark:hover:bg-white/10 active:scale-90 transition">
                    <i class="ph ph-caret-left text-2xl"></i>
                </button>
                <div class="flex flex-col items-center">
                    <span class="text-[10px] font-bold text-brand-sub dark:text-gray-500 uppercase tracking-wider" id="reader-nav-title">BAB 1</span>
                    <div class="w-12 h-0.5 bg-gray-200 dark:bg-white/20 mt-1 rounded-full overflow-hidden"><div id="mini-progress" class="h-full bg-brand-slate w-0 transition-all duration-300"></div></div>
                </div>
                <button id="reader-settings-btn" class="w-10 h-10 flex items-center justify-center rounded-full text-brand-text dark:text-white hover:bg-gray-100 dark:hover:bg-white/10 active:scale-90 transition">
                    <i class="ph ph-text-aa text-xl"></i>
                </button>
            </div>
            
            <!-- Reader Content -->
            <div id="reader-scroll" class="flex-1 overflow-y-auto px-6 pt-24 pb-32">
                <div class="max-w-2xl mx-auto">
                    <h2 id="reader-title" class="font-serif text-3xl font-bold text-brand-text dark:text-white mb-8 leading-tight"></h2>
                    <div id="reader-body" class="font-book text-lg text-brand-text/90 dark:text-gray-300 leading-loose text-justify space-y-6"></div>
                </div>
            </div>
            
            <!-- Reader Bottom Bar -->
            <div id="reader-bottom" class="reader-ui absolute bottom-0 left-0 right-0 p-5 bg-white/80 dark:bg-black/80 backdrop-blur-md border-t border-gray-100 dark:border-white/10 z-10 transition-transform duration-300">
                <div class="flex justify-between items-center max-w-2xl mx-auto">
                    <button id="btn-prev" class="text-brand-text dark:text-white font-bold text-xs flex items-center gap-2 px-4 py-2 rounded-full hover:bg-gray-100 dark:hover:bg-white/10 active:scale-95 disabled:opacity-30 disabled:hover:bg-transparent transition">
                        <i class="ph ph-caret-left text-lg"></i> PREV
                    </button>
                    <div class="flex-1 mx-6 h-1.5 bg-gray-200 dark:bg-white/20 rounded-full overflow-hidden relative cursor-pointer" id="reader-progress-container">
                        <div id="progress-bar" class="h-full bg-brand-slate w-0 transition-all duration-300 rounded-full relative">
                            <div class="absolute right-0 top-1/2 -translate-y-1/2 w-3 h-3 bg-white border-2 border-brand-slate rounded-full shadow-sm scale-0 transition-transform"></div>
                        </div>
                    </div>
                    <button id="btn-next" class="text-brand-text dark:text-white font-bold text-xs flex items-center gap-2 px-4 py-2 rounded-full hover:bg-gray-100 dark:hover:bg-white/10 active:scale-95 disabled:opacity-30 disabled:hover:bg-transparent transition">
                        NEXT <i class="ph ph-caret-right text-lg"></i>
                    </button>
                </div>
            </div>
            
            <!-- Settings Panel -->
            <div id="settings-panel" class="absolute bottom-20 left-4 right-4 bg-white/95 dark:bg-black/90 backdrop-blur-xl rounded-2xl shadow-floating border border-white/10 p-4 hidden transition-all duration-300 transform translate-y-4 opacity-0 z-20">
                <div class="flex justify-between items-center mb-4 border-b border-gray-100 dark:border-white/10 pb-2">
                    <span class="text-xs font-bold text-brand-sub dark:text-gray-500 uppercase">Tampilan Bacaan</span>
                    <button id="close-settings-btn" class="text-gray-400"><i class="ph ph-x"></i></button>
                </div>
                <div class="flex gap-2">
                    <button class="flex-1 py-2 rounded-lg bg-brand-bg dark:bg-white/10 text-xs font-medium text-brand-text dark:text-white active:scale-95 transition">Aa</button>
                    <button class="flex-1 py-2 rounded-lg bg-brand-slate text-white text-xs font-medium active:scale-95 transition">Serif</button>
                </div>
            </div>
        </section>
    </div>
    <script src="./script.js"></script>
</body>
</html>
